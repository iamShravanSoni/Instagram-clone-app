<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram Create Post</title>
    <link rel="stylesheet" href="./stylesheets/create.css">
</head>
<body>
    <div id="postForm">
        <h2 style="text-align: center;">Create a Post</h2>

        <!-- Image container and preview -->
        <div id="photoContainer">
            <img id="selectedPhoto" alt="Selected Photo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ4AAACUCAMAAABVwGAvAAAAmVBMVEX///8vKjH///3//f4AAAD49/iFgYZeWV/g4OFJR0soICnd3N2vr7AvKDL7+/vj5OUgHCR1c3cgFiIiGSMUCxhjYGVEQUYtKy/T0dR5eHsZCx0qJi4qIi5GP0gkISgaFB5VVFi5ubk9OT7CwMIEAAsgHyLu7u6enJ4aFx2ln6Y0MTaNi4/Lx86CgoKtqK7JyckPDhJuaXBnZ2fbWpfeAAAFQklEQVR4nO2aa1ujOhCASSGVW0PY0hY2uwkUBITVav//jzsJBLbu5bR9jsHzYd7HCyLV1wwzkwQtCwAAAAAAAAAAAAAAAAAAAAAAzer3E6vfT34Wq9UKh9m6KSNM5jMSeUAur7Mnlvazskq0gh/zPixdrAWXtvg7qYMUBypEu9+tw6Ae3fQYfjZNghDjlDOkPovKYfk6PEUYv7tqNbOsHc4ook9Pfc6dSihFxGhCOy/upePn60UPDPHaInX0o98hkQjqbyScy+H0ds9FdHkx+dtPMUZ6RDzHls6FoGyy/HigU6wTx2G7pjjVOq8Xz5nigMRa2s2Bw1FaNHEuqoQOseZtIo67rCmDWn17WT/ScJS8THpa0ZaObtF7h/bL1mcMbZjPGTvmcfOjXia+0yDgWIaxlFV38pOHcwLgNOx3XufTrY/kSLK2cpJjHJ5c9WqjOTKW/5UV5ZR7gTX2g7kzDG/jX1C76cvz+ZhUgo63o4z1PrRVLpuzG3+0/A3BsetifBncS6bLSZAW6/zIhUyZwwFxUVjEqN6ELCg1nk9clrdZT2vYODq9POed4AiJzDY6ehIyoGJJbmKINand8hkh+kaMjp4Vxg93Ehc6aQs5er1ltH+UsnHNbLfbL3/m5zWP7etjaKlIk54iERpNjfpBVgomaxljvixs3wbYt/lg+uizEVX80KM31GUcU9adjOoFe8Y67y46WVUCVS6jPWdeZNlG9Q78IXDvIHjztV4qmH/GRjNXjh7d3dU9ZUjRIVBHRYVoYxlNjeD7RurJObs9TJJu6KPqjkODXpYgXhjW26NBj1j4FJbR9Rdc6H3n6JBaplOD7oisEqn32opjeIceTpDKjEX03FyoGZ0or87jZr20Qv7ZMh3cUa+haLORfioTb9QLE5T06ozBpjHce8Qi2ajH9sG1V8x6vUBVac5M67FLPeRdzY5Jrz77qLoll/673oq88EGvjcm1UE16rodYZ3pCr0fPquOvG4ZEF7y/08f1hoVnDXsuy2W3EbFhO901ZNmLYupUD+XQQWeZQdW26qwho5ut9LZM6tlPDCXNMnrqCAdpVP9SVdR6SFaQXNCzbP1kaCtaj6wposUyepOUPehNX41RJk1F5bSzK+zxCq1X7yjbp4voDekwfJjeB8dh7KLnZFyDswYPV2m96Mj4rl5Ez14NW6HTmow0IVbLR7W5V3oUjTCxS9VlWu+UID/D13/BB+jpXZPVWFSirHrN6mF5WzeUj3KqJtJHuchQo6cyt6kQb4zvY7zXU4FNvfZwcM6uEn0bN9K0HmJtX1taL5Y92nTPeKdnreQSETdq9Yo62pW46JJRa4Ylx7SOfRXcs0DHqw3wQ/WGCkf1ePEu66So2uG7FKR5kA33nhzY3HhmvNeTiSB+mnCG2OZXPbRPsyG4Z7rNjNvJybwuyyqwfcLRNZSeGr24rRrze6SDHlH9wHLXcyLcpOecTMtNeuqo3NMb7Ga9N+EssP+o9UjdONcDe6l3rvbm7fRKTc5X2pvkLoLrLJAZuqmV+1vtfmauc8Oq7mP0XE8F9rca8i+j51pvlZquLDFbPrs5G+3u0DtfX5V8kJ4cvSRJviqSq3T63svMN1xLpwYuwpsponGtES3yWEPq8dyN7sB9o6wzPxmY9Bjizl1QpIJrej9+pH6YZsNjblxFzqo6quYqyzwvPVHKKZf4N8JZy42v0CZsK+jXd9IYX6BdssJ3suCT0otnZn98lvb3p2uLK/5P9choaN/E5/xf0GcMCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAxvkHvGSE5uunPREAAAAASUVORK5CYII=">
        </div>

        <!-- Button to open file input -->
        <label id="selectPhotoButton" for="imageInput">Select Photo</label>

        <form action="/createuploads" method="post" enctype="multipart/form-data">
            <!-- Hidden file input -->
            <input type="file" id="imageInput" name="image" accept="image/*">

            <!-- Caption input -->
            <h6>Character Count: <span class="char">0</span></h6>
            <h6>Word Count : <span class="word">0</span></h6>
            <textarea id="captionInput" name="caption" placeholder="Write a caption..."></textarea>
            <!-- Post button -->
            <input type="submit" value="Post" id="postButton" name="post">
        </form>
    </div>
    <% include navbar.ejs %>
    <script>
        function post() {
            const selectedPhotoSrc = document.getElementById('selectedPhoto').src;
            const caption = document.getElementById('captionInput').value;

            // Here, you can implement the logic to post the data (send to server, etc.)
            console.log('Selected Photo:', selectedPhotoSrc);
            console.log('Caption:', caption);
        }

        document.addEventListener('DOMContentLoaded', function () {
            const imageInput = document.getElementById('imageInput');
            const selectedPhoto = document.getElementById('selectedPhoto');
            const selectPhotoButton = document.getElementById('selectPhotoButton');

            // Open file input when the button is clicked
            selectPhotoButton.addEventListener('click', function () {
                // Reset the input value to allow selecting the same file
                imageInput.value = null;
                imageInput.click();
            });

            // Display selected image in the preview
            imageInput.addEventListener('change', function () {
                const file = imageInput.files[0];

                if (file) {
                    const reader = new FileReader();

                    reader.onload = function (e) {
                        selectedPhoto.src = e.target.result;
                    };

                    reader.readAsDataURL(file);
                } else {
                    // Reset the image preview if no file is selected
                    selectedPhoto.src = '';
                }
            });
        });

        // Build a character counter for a text area or input field, which updates
        //  real-time as the user types and enforces a character limit.

        var char = document.querySelector(".char");
        var word = document.querySelector(".word");

        var textArea = document.querySelector("textarea");

        textArea.addEventListener("input", () => {
        char.textContent = textArea.value.length;
        word.textContent = textArea.value.trim().split(" ").length;
        });
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Search</title>
    <link rel="stylesheet" href="./stylesheets/search.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@3.6.0/fonts/remixicon.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- <div class="container">
    <div class="input-container">
        <input id="inputusername" type="text" placeholder="Type something...">
        <div id="previousSearch" class="previous-search"></div>
    </div>
    </div>

    <div class="users">

    </div> -->
    <div class="container">
        <div class="input-container">
            <i></i>
            <input id="inputusername" type="text" placeholder="search username">
        </div>
        <div class="users">

        </div>
    </div>

    
</div>

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.5/axios.min.js"
      integrity="sha512-TjBzDQIDnc6pWyeM1bhMnDxtWH0QpOXMcVooglXrali/Tj7W569/wd4E8EDjk1CwOAOPSJon1VfcEt1BI4xIrA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script>
      const user = document.querySelector("#inputusername");
      let clutter = "";
      user.addEventListener("input", function () {
        console.log(user.value);
        axios.get(`/username/${user.value}`).then(function (data) {
          clutter = "";
          data.data.forEach(function (elem) {
            clutter += `<a href="/profile" class="outline-none">
                <div class="container1">
                  <div class="profilepic">
                    <img src="/images/uploads/${elem.profilepicture}">    
                  </div>
                  <div class="username1">
                    <h3>${elem.username}</h3>
                    <h4>${elem.name}</h4>
                  </div>
                </div>            
            </a>`;
          });
          document.querySelector(".users").innerHTML = clutter;
        });
      });

      
    </script>
    <% include navbar.ejs %>
  </body>
</html>
